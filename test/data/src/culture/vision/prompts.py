from typing import List, Dict, Any

VISION_TITLES = {
    "혁신" : "VISION_INNOVATION",
    "고객" : "VISION_CUSTOMER",
    "도전" : "VISION_CHALLENGE",
    "성장" : "VISION_GROWTH",
    "최고지향" : "VISION_BEST",
    "창조" : "VISION_CREATIVITY",
    "전문성" : "VISION_SPECIAL",
    "상생" : "VISION_COEXISTENCE",
    "소통" : "VISION_COMMUNICATION",
    "사회공헌" : "VISION_CONTRIBUTION",
    "인재" : "VISION_TALENT",
    "열정" : "VISION_PASSION",
    "문제해결" : "VISION_SOLVING",
    "성과" : "VISION_PERFORMANCE",
    "즐거움" : "VISION_FUN",
    "신속성" : "VISION_QUICK"
}

VISION_INITIAL_MESSAGES = [
    {
        "role": "system",
        "content": ("""
        당신은 뛰어난 기업 분석가로서, 특정 기업의 홈페이지와 뉴스 기사 등 다양한 출처에서 발췌한 정보를 바탕으로 해당 기업의 비전(미래 지향점) 및 가치관을 평가해야 합니다. 
        평가 대상은 총 16개의 항목이며, 각 항목에 대해 아래의 기준과 가이드라인에 따라 평가 및 분석을 수행해야 합니다.

        1. 평가 방식 및 점수 산정
        - 각 항목은 5점 만점으로 평가하며, 점수는 소수점 첫째 자리(예: 3.2, 4.5) 단위로 부여합니다.
        - 점수 기준:
            - 5.0: 매우 높음
            - 4.0 ~ 4.9: 높음
            - 3.0 ~ 3.9: 보통
            - 2.0 ~ 2.9: 낮음
            - 1.0 ~ 1.9: 매우 낮음

        2. 점수 분포 조정
        - 전체 항목의 점수 분포는 아래와 같이 조정되어야 하며, 각 구간 내에서 소수점 첫째 자리의 다양성을 고려하여 다양한 점수를 부여해야 합니다.
            - 4.6 ~ 5.0: 최대 0~1개
            - 4.0 ~ 4.5: 1~2개
            - 3.5 ~ 3.9: 2~3개
            - 3.0 ~ 3.4: 2~3개
            - 2.0 ~ 2.9: 4~5개
            - 1.0 ~ 1.9: 나머지 항목

        3. 키워드 및 강조점 고려
        - 기업과 관련된 공문서에서 추출한 중요 키워드 집합이 제공됩니다. 이와 유사한 속성을 가진 비전 관련 16개 키워드가 포함되어 있다면, 해당 항목에 높은 점수를 부여합니다.
        - 공문서에서 특별히 강조되는 키워드나 개념은 높은 점수로, 거의 언급되지 않거나 간접적으로만 언급된 항목은 낮은 점수로 평가합니다.
        - 최대 7개 항목에 대해서만 높은 점수를 부여하고, 나머지 항목은 상대적으로 낮은 점수를 부여해야 합니다.
        - 기업 정보에 명확히 드러나지 않는 항목은 2.0 이하의 낮은 점수를 부여합니다.

        4. 평가 근거의 명확한 제시
        - 각 항목별로 부여된 점수에 대해 구체적이고 명확한 근거를 서술합니다.
        - 단순히 "개선의 여지가 있다"라는 표현은 사용하지 않고, 왜 해당 점수를 선택했는지 객관적인 이유와 자료를 기반으로 상세히 설명합니다.

        5. 답변 언어
        - 모든 답변은 반드시 한국어로 작성해야 합니다.
        """
        )
    }
]
       
VISION_CONTEXTS = {
    "혁신": """
    - 기업이 새로운 아이디어와 방법을 도입하여 변화를 추구하고, 독특하고 차별화된 제품이나 서비스를 개발하는 정도를 평가합니다.
    - 기존 시장에 없는 새로운 아이템 개발 여부를 검토하세요.
    """,
    "고객": """
    - 기업이 고객의 니즈를 이해하고, 고객 만족을 위해 노력하며, 고객과의 신뢰 관계를 구축하는 정도를 평가합니다.
    - 고객 만족을 위한 구체적인 노력이 있는지 검토하세요.
    """,
    "도전": """
    - 기업이 새로운 영역에 진출하거나 어려운 목표를 설정하고 이를 달성하기 위해 노력하는 정도를 평가합니다.
    - 새로운 영역으로의 진출 시도나 어려운 목표 달성 사례를 확인하세요.
    """,
    "성장": """
    - 기업이 지속적인 발전과 확장을 추구하며, 미래를 위한 연구와 고민을 지속하는 정도를 평가합니다.
    - 안정성을 추구하며 기업의 성장을 목적으로 하는지 검토하세요.
    """,
    "최고지향": """
    - 기업이 업계 최고 수준을 목표로 하며, 글로벌 시장에서 리더십을 추구하는 정도를 평가합니다.
    - 글로벌 또는 시장 선점을 주목적으로 하는지 검토하세요.
    """,
    "창조": """
    - 기업이 독창적인 아이디어를 발굴하고, 새로운 가치를 창출하는 능력과 의지를 평가합니다.
    """,
    "전문성": """
    - 기업이 해당 분야에서 높은 수준의 기술과 지식을 보유하고, 품질 높은 제품이나 서비스를 제공하는 정도를 평가합니다.
    """,
    "상생": """
    - 기업이 파트너사, 지역사회 등 이해관계자들과 협력하며 함께 발전하려는 노력의 정도를 평가합니다.
    """,
    "소통": """
    - 기업 내부와 외부에서 원활한 의사소통을 추구하고, 다양성을 인정하며 개방적인 문화를 조성하는 정도를 평가합니다.
    """,
    "사회공헌": """
    - 기업이 사회적 책임을 인식하고, 환경 보호, 윤리 경영, 지역사회 봉사 등에 참여하는 정도를 평가합니다.
    """,
    "인재": """
    - 기업이 인재를 중요하게 여기고, 직원들을 존중하며 그들의 성장과 안정을 지원하는 정도를 평가합니다.
    """,
    "열정": """
    - 기업과 구성원들이 일에 대한 강한 의지와 열의를 가지고 적극적으로 임하는 정도를 평가합니다.
    """,
    "문제해결": """
    - 기업이 직면한 문제들을 효율적이고 합리적으로 해결하는 능력과 의지를 평가합니다.
    """,
    "성과": """
    - 기업이 구체적인 목표를 설정하고 이를 달성하여 수익과 성장을 이루어내는 정도를 평가합니다.
    """,
    "즐거움": """
    - 기업이 구성원들의 행복과 즐거움을 중요시하고, 긍정적인 업무 환경을 조성하는 정도를 평가합니다.
    """,
    "신속성": """
    - 기업이 시장 변화에 빠르게 대응하고, 의사결정과 업무 처리를 신속하게 하는 정도를 평가합니다.
    """
}


def get_vision_messages(i: int, title: str, contexts: str, combined_data: str, keywords: str) -> List[Dict[str, Any]]:
    messages = [
        {
            "role": "system",
            "content": (
                f"{i}번째 비전 항목은 {title}에 대한 평가입니다.\n"
                f"{contexts.strip()}\n\n"
                "응답은 다음 JSON 형식으로 반환되어야 합니다:\n"
                "{\n"
                f"  \"{title}\": {{\n"
                "    \"score\": (float, null),\n"
                "    \"summary\": (string, null)\n"
                "  }\n"
                "}\n"
                "각 필드에 대해:\n"
                "- \"score\": 5점 만점으로 평가된 점수. 데이터가 없으면 null.\n"
                "- \"summary\": 해당 항목에 대한 요약 설명. 데이터가 없으면 null."
            )
        },
        {
            "role": "user",
            "content": (
                f"{combined_data.strip()}\n\n"
                f"추출된 키워드:\n{keywords}"
            )
        }
    ]

    return messages
